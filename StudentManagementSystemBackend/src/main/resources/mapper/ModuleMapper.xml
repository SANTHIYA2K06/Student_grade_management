<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="uk.ac.ucl.comp0010.mapper.ModuleMapper">
  <select id="list" resultType="uk.ac.ucl.comp0010.vo.ModuleListVo">
    SELECT module.code,
           module.name,
           module.mnc,
           module.credits,
           staff.first_name AS staffFirstName,
           staff.last_name  AS staffLastName
    FROM module
    LEFT JOIN staff ON staff.id = module.staff_id
    <if test="ew != null and ew.customSqlSegment != null">
      ${ew.customSqlSegment}
    </if>
  </select>
  <select id="get" resultType="uk.ac.ucl.comp0010.vo.ModuleDetailVo">
    SELECT module.code,
           module.name,
           module.mnc,
           module.credits,
           staff.first_name AS staffFirstName,
           staff.last_name  AS staffLastName
    FROM module
           LEFT JOIN staff ON staff.id = module.staff_id
    WHERE module.code = #{code};
  </select>
</mapper>
